# https://artifacthub.io/packages/helm/gitlab/gitlab
---
global:
  shell:
    port: 22
  ingress:
    tls:
      enabled: true
      secretName: gitlab-tls-certificate
    configureCertmanager: false
nginx-ingress:
  controller:
    autoscaling:
      enabled: true
      minReplicas: 1
      maxReplicas: 1
certmanager:
  install: false
prometheus:
  install: false
gitlab-runner:
  certsSecretName: gitlab-wildcard-tls-chain
  logLevel: debug
  runners:
    locked: false
    config: |
      [[runners]]
        [runners.kubernetes]
          image = "docker:20.10.8"
          poll_timeout = 180
          privileged = true
        [runners.kubernetes.volumes]
          [[runners.kubernetes.volumes.empty_dir]]
            name = "docker-certs"
            mount_path = "/certs/client"
            medium = "Memory"
          [[runners.kubernetes.volumes.pvc]]
            name = "gitlab-dind-var-lib"
            mount_path = "/var/lib/docker"
    executor: kubernetes
redis:
  master:
    persistence:
      size: 1Gi
postgresql:
  persistence:
    size: 1Gi
gitlab:
  webservice:
    hpa:
      minReplicas: 1
      maxReplicas: 1
  sidekiq:
    minReplicas: 1
    maxReplicas: 1
  gitaly:
    persistence:
      size: 1Gi
  gitlab-shell:
    minReplicas: 1
    maxReplicas: 1
minio:
  persistence:
    size: 1Gi
registry:
  hpa:
    minReplicas: 1
    maxReplicas: 1